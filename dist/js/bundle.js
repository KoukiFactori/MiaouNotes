(()=>{"use strict";function t(t,e){for(var n=0,a=!1,r=0;r<t.length;r++)t[r]>=0&&(n+=t[r]*e[r],a=!0);var o=-1;return a&&-1!=n&&(o=n/e.reduce((function(t,e){return t+e}),0)),o}function e(e,n){var a=[],r=[];return e.forEach((function(t){t.matiere==n&&(a.push(t.note),r.push(t.coefficient))})),t(a,r)}function n(n){var a=[],r=[],o="";return n.forEach((function(t){o!=t.matiere&&e(n,t.matiere)>=0&&(a.push(e(n,t.matiere)),r.push(1),o=t.matiere)})),t(a,r)}function a(t,e,n){void 0===n&&(n=!1);var a=document.createElement("tr");e&&a.classList.add("moyenne"),n&&a.classList.add("new-note");var r=document.createElement("td");r.textContent=t.matiere,a.appendChild(r);var o=document.createElement("td");o.textContent=t.evaluation,a.appendChild(o);var d=document.createElement("td");d.classList.add("hide"),e||(d.textContent=t.date),a.appendChild(d);var i=document.createElement("td");i.classList.add("hide"),e||(i.textContent=t.commentaire),a.appendChild(i);var c=document.createElement("td");if(t.note>=10)c.textContent=t.note.toPrecision(4).toString();else if(-1==t.note)c.textContent="";else{var l=document.createElement("span");l.classList.add("badge","bg-warning"),t.note<0?l.textContent=t.note.toString():l.textContent=t.note.toPrecision(4).toString(),c.appendChild(l)}a.appendChild(c);var u=document.createElement("td");u.classList.add("hide"),e||(u.textContent=t.coefficient.toString()),a.appendChild(u);var s=document.createElement("td");if(!e){var m=document.createElement("button");m.classList.add("btn","btn-info","btn-outline","btn-square","btn-xs"),m.setAttribute("data-provide","modaler"),m.setAttribute("data-bs-toggle","tooltip"),m.setAttribute("data-bs-placement","bottom"),m.setAttribute("data-url","/fr/application/etudiant/note/details/"+t.id),m.setAttribute("data-title","Détails d'une note"),m.setAttribute("data-bs-original-title","Détails");var h=document.createElement("i");h.classList.add("fas","fa-info"),m.appendChild(h),s.appendChild(m)}return a.appendChild(s),a}chrome.storage.sync.get(["notesAlreadyKnow"],(function(t){var r=t.notesAlreadyKnow||[],o=document.querySelector("#mainContent > div.row > div:nth-child(5) > div > div > table"),d=function(t){var e=t.querySelector("tbody"),n=[];return e.querySelectorAll("tr").forEach((function(t){var e=t.querySelector("td:nth-child(7) > button").getAttribute("data-url").split("/"),a={id:parseInt(e[e.length-1]),matiere:t.querySelector("td:nth-child(1)").textContent,evaluation:t.querySelector("td:nth-child(2)").textContent,date:t.querySelector("td:nth-child(3)").textContent,commentaire:t.querySelector("td:nth-child(4)").textContent,note:parseFloat(t.querySelector("td:nth-child(5)").textContent),coefficient:parseFloat(t.querySelector("td:nth-child(6)").textContent)};n.push(a)})),n.sort((function(t,e){return t.matiere>e.matiere?1:-1})),n}(o);console.log(r);var i,c=function(t,r){var o=document.createElement("table");o.classList.add("table","table-border","table-striped");var d=document.createElement("thead");o.appendChild(d);var i=document.createElement("tr");d.appendChild(i);var c=document.createElement("th");c.textContent="Matière",i.appendChild(c);var l=document.createElement("th");l.textContent="Evaluation",i.appendChild(l);var u=document.createElement("th");u.textContent="date",i.appendChild(u);var s=document.createElement("th");s.textContent="Commentaire de l'évaluation",i.appendChild(s);var m=document.createElement("th");m.textContent="Note",i.appendChild(m);var h=document.createElement("th");h.textContent="coefficient",i.appendChild(h);var p=document.createElement("th");p.textContent="Informations",i.appendChild(p);var v=document.createElement("tbody");o.appendChild(v),t.forEach((function(n,o){var d=a(n,!1,!r.includes(n.id));if(v.appendChild(d),o==t.length-1||t[o+1].matiere!=n.matiere){var i=a({matiere:n.matiere,evaluation:"Moyenne",note:e(t,n.matiere)},!0);v.appendChild(i)}}));var C=a({matiere:"",evaluation:"Moyenne Générale",note:n(t)},!0);return v.appendChild(C),o}(d,r);o.replaceWith(c),((i=document.createElement("button")).innerHTML="Sauvegarder les notes connues",i.classList.add("btn","btn-sm","btn-primary"),i.id="save-notes-btn",document.querySelector("#mainContent > div.row > div:nth-child(5) > div > h4").appendChild(i),i).addEventListener("click",(function(){var t=[];d.forEach((function(e){t.push(e.id)})),chrome.storage.sync.set({notesAlreadyKnow:t},(function(){console.log("rechargement de la page"),location.reload()}))}))}))})();